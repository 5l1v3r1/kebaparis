<html>
<head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>
<script type="text/javascript">
  function initialize() {
    var latlng = new google.maps.LatLng(47.54697342707405, 7.591985306884772);
    var myOptions = {
      zoom: 14,
      center: latlng,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(document.getElementById("map"), myOptions);
               
                var marker = new google.maps.Marker({
               
                               position: latlng,
                               draggable: true,
                               title:"my fucking Dürüm!"
                });
 
                marker.setMap(map);
               
                google.maps.event.addListener(marker, "dragstart", function() {
                               updateMarkerStatus("dragging...");
                });
 
                google.maps.event.addListener(marker, "dragend", function() {
                               //var newPosition = String(marker.getPosition());
                               var newPosition = marker.getPosition();
                               //updateMarkerStatus(newPosition);
                               //updateMarkerStatus(getCity(newPosition));
                               //alert(getCity("17.74033553, 83.25067267"));
                               //getCity(newPosition);
                               //var newStr = newPosition.substring(1,newPosition.length-1);
                               //var newPosition = "shit"
                               //var newStr = newPosition.substring(0, newPosition.length-1);
                               var Location = getCity(newPosition);
                               updateMarkerStatus(newPosition);
                               //alert(typeof newPosition);
                });
               
 
               
                function updateMarkerStatus(str) {
                               document.getElementById('markerStatus').innerHTML = str;
                }
                
                function getCity(oInput) {
																	//alert(str);
																	//var str = str.slice(1, -1);
																	//alert(str);
																	//var latlngStr = str.split(",",2);
																	//alert("lat: " + latlngStr[0] + " lng: " + latlngStr[1]);
																	//var lat = parseFloat(latlngStr[0]);
																	//var lng = parseFloat(latlngStr[1]);
																	//alert("lat: " + lat + " lng: " + lng);
																	//var latlng = new google.maps.LatLng(lat, lng);
							

							  
							  var address;
							  latlng = oInput;

							  geocoder = new google.maps.Geocoder();
							  geocoder.geocode({'latLng': latlng}, function(results, status) {
									if (status == google.maps.GeocoderStatus.OK) {
										if (results[1]) {
											//alert("got answer..");
											address = results[0].formatted_address;
										}
									}
									else {
									  address = "Geocoder failed due to: " + status;
									}
									//alert("1 " + address);
									callback(address);

                              });
							  
							  function callback(input) {
								document.getElementById('markerStatus').innerHTML = document.getElementById('markerStatus').innerHTML + address;
								//alert("2 " + input);
							  
							  }

                             
                } // end getCity()
 
               
               
  }
 
</script>
</head>
<body onload="initialize()">
                <div id="markerStatus" style="width:100%; height:5%"></div>
                <div id="map" style="width:100%; height:95%"></div>
</body>
</html>